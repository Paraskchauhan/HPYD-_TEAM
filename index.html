<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI POWERED SMART SURVELLIANCE AND ALERT SYSTEM</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 720px; margin: 40px auto; padding: 0 16px; }
    h1 { font-size: 24px; }
    input, button { padding: 8px 10px; font-size: 16px; }
    #output { margin-top: 16px; background:#f7f7f7; padding:12px; border-radius:6px; min-height:24px; }
    #status { margin-top:8px; font-size:14px; color:#666; }
  </style>
</head>
<body>
  <h1>AI MODEL</h1>

  <!-- Input you can change or remove -->
  <label for="textIn">Enter text for model:</label><br/>
  <input id="textIn" type="text" placeholder="Type something..." value="Hello from frontend" style="width:100%; margin-top:8px;" />

  <!-- Button -->
  <div style="margin-top:12px;">
    <button id="runBtn">Run AI Model</button>
    <span id="status"></span>
  </div>

  <!-- Output area -->
  <div id="output">Model output will appear here.</div>

  <!-- ====== SCRIPT: API CALL (replace YOUR-RENDER-URL is already done) ====== -->
  <script>
    
    const API_BASE = "https://ai-backend-nsqe.onrender.com"; 
    const PREDICT_ENDPOINT = API_BASE + "/predict";

    const runBtn = document.getElementById("runBtn");
    const output = document.getElementById("output");
    const status = document.getElementById("status");
    const textIn = document.getElementById("textIn");

    runBtn.onclick = async function () {
      // clear previous
      status.innerText = "";
      output.innerText = "";
      runBtn.disabled = true;
      runBtn.innerText = "Running...";
      status.innerText = "Calling API...";

      const payload = { data: textIn.value || "Hello" }; // adapt key if your API expects 'text' instead of 'data'

      try {
        const res = await fetch(PREDICT_ENDPOINT, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
            
          },
          body: JSON.stringify(payload)
        });

      
        if (!res.ok) {
          const txt = await res.text();
          throw new Error("HTTP " + res.status + " â€” " + txt);
        }

        const json = await res.json();
      
        let display;
        if (json.result !== undefined) display = json.result;
        else if (json.prediction !== undefined) display = JSON.stringify(json.prediction);
        else display = JSON.stringify(json);

        output.innerText = display;
        status.innerText = "Success";
      } catch (err) {
        console.error("API error:", err);
        output.innerText = "Error: " + err.message;
        status.innerText = "Failed";
      } finally {
        runBtn.disabled = false;
        runBtn.innerText = "Run AI Model";
      }
    };
  </script>
</body>
</html>
